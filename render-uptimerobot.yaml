# ğŸš€ Render.com + UptimeRobot ìµœì í™” ì„¤ì •
# 24/7 ë¬´ì¤‘ë‹¨ ì•Œêµ¬ëª¬ í¬ë¡¤ë§ ì„œë²„

services:
  - type: web
    name: algumon-crawler
    env: node
    buildCommand: npm install --only=production
    startCommand: npm start
    plan: free

    # UptimeRobot ìµœì í™” ì„¤ì •
    healthCheckPath: /health  # Render ë‚´ì¥ Health Check

    envVars:
      - key: NODE_ENV
        value: production
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_SERVICE_ROLE_KEY
        sync: false  # ğŸ”‘ SERVICE_ROLE_KEY í•„ìˆ˜! (ì“°ê¸° ê¶Œí•œ)
      - key: SUPABASE_ANON_KEY
        sync: false  # Fallbackìš©
      - key: PORT
        generateValue: true  # Render ìë™ í• ë‹¹

    # Sleep ëª¨ë“œ ìµœì í™”
    scaling:
      minInstances: 1
      maxInstances: 1

    # ìë™ ë°°í¬ ì„¤ì •
    autoDeploy: true
    branch: main

    # ë¦¬ì†ŒìŠ¤ ìµœì í™”
    disk:
      name: algumon-crawler-disk
      size: 1GB

    # í™˜ê²½ ìµœì í™”
    region: oregon  # ë¹ ë¥¸ ì‘ë‹µì„ ìœ„í•œ US West

    # ë¡œê·¸ ë ˆë²¨
    logLevel: info

# UptimeRobot ëª¨ë‹ˆí„°ë§ ì—”ë“œí¬ì¸íŠ¸ ìµœì í™”:
# /ping          - ì´ˆê²½ëŸ‰ í•‘ (1ë¶„ ê°„ê²©)
# /health        - ìƒì„¸ ìƒíƒœ (5ë¶„ ê°„ê²©)
# /status-check  - ì„œë¹„ìŠ¤ ìƒíƒœ (10ë¶„ ê°„ê²©)
# /              - ë©”ì¸ ì„œë¹„ìŠ¤ (15ë¶„ ê°„ê²©)

# ì˜ˆìƒ ì„±ëŠ¥:
# - Cold Start: ~10-15ì´ˆ (ì²« ìš”ì²­)
# - Warm State: ~1-3ì´ˆ (ì¼ë°˜ ìš”ì²­)
# - Sleep ë°©ì§€: UptimeRobot 1ë¶„ í•‘ìœ¼ë¡œ í•­ìƒ í™œì„±